<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>




<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.3"/>


    <meta name="description" content="Project Euler | 欧拉计划 中文翻译站" />



  <meta name="keywords" content="Hexo,next" />





  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.3" />



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    analytics: {
      google: ''
    },
    sidebar: 'post'
  };
</script>




  <title> Problem 597 // Project Euler | 欧拉计划 </title>
</head>

<body>
  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->

  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <div id="header" class="header">
      <div class="header-inner">
        <h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">Project Euler | 欧拉计划</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<div class="site-nav">
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-home">
          <a href="/">
            <i class="menu-item-icon icon-home"></i> <br />
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-problems">
          <a href="/problems">
            <i class="menu-item-icon icon-problems"></i> <br />
            题目
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            <i class="menu-item-icon icon-about"></i> <br />
            关于
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
<form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'z6bmYNMJM3AR1esetWJa','2.0.0');
</script>

<div class="site-search-toggle"></div>
    </div>
  
</div>


      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              Problem 597
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2017-04-02
        </span>

        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/597/#comments" >
              <span class="post-comments-count disqus-comment-count" data-disqus-identifier="597/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        <hr>
<h1 id="Problem-597"><a href="#Problem-597" class="headerlink" title="Problem 597"></a><a href="https://projecteuler.net/problem=597" target="_blank" rel="external">Problem 597</a></h1><hr>
<h2 id="Torpids"><a href="#Torpids" class="headerlink" title="Torpids"></a><strong>Torpids</strong></h2><p>The Torpids are rowing races held annually in Oxford, following some curious rules:</p>
<ul>
<li>A division consists of $n$ boats (typically 13), placed in order based on past performance.</li>
<li>All boats within a division start at 40 metre intervals along the river, in order with the highest-placed boat starting furthest upstream.</li>
<li>The boats all start rowing simultaneously, upstream, trying to catch the boat in front while avoiding being caught by boats behind.</li>
<li>Each boat continues rowing until <i>either</i> it reaches the finish line <i>or</i> it catches up with (“bumps”) a boat in front.</li>
<li>The finish line is a distance $L$ metres (the course length, in reality about 1800 metres) upstream from the starting position of the lowest-placed boat. (Because of the staggered starting positions, higher-placed boats row a slightly shorter course than lower-placed boats.)</li>
<li>When a “bump” occurs, the “bumping” boat takes no further part in the race. The “bumped” boat must continue, however, and may even be “bumped” again by boats that started two or more places behind it.</li>
<li>After the race, boats are assigned new places within the division, based on the bumps that occurred. Specifically, for any boat $A$ that started in a lower place than $B$, then $A$ will be placed higher than $B$ in the new order if and only if one of the following occurred:<ol>
<li>$A$ bumped $B$ directly </li>
<li>$A$ bumped another boat that went on to bump $B$ </li>
<li>$A$ bumped another boat, that bumped yet another boat, that bumped $B$ </li>
<li>etc</li>
</ol>
</li>
</ul>
<p><b>NOTE</b>: For the purposes of this problem you may disregard the boats’ lengths, and assume that a bump occurs precisely when the two boats draw level. (In reality, a bump is awarded as soon as physical contact is made, which usually occurs when there is much less than a full boat length’s overlap.)</p>
<p>Suppose that, in a particular race, each boat $B_j$ rows at a steady speed $v_j = - \log X_j$ metres per second, where the $X_j$ are chosen randomly (with uniform distribution) between 0 and 1, independently from one another. These speeds are relative to the riverbank: you may disregard the flow of the river.</p>
<p>Let $p(n,L)$ be the probability that the new order is an <b>even permutation</b> of the starting order, when there are $n$ boats in the division and $L$ is the course length.</p>
<p>For example, with $n=3$ and $L=160$, labelling the boats as $A$,$B$,$C$ in starting order with $C$ highest, the different possible outcomes of the race are as follows:</p>
<table>
<thead>
<tr>
<th style="text-align:center"><b>Bumps occurring</b></th>
<th style="text-align:center"><b>New order</b></th>
<th style="text-align:center"><b>Permutation</b></th>
<th style="text-align:center"><b>Probability</b></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"> none</td>
<td style="text-align:center">$A$, $B$, $C$</td>
<td style="text-align:center">even</td>
<td style="text-align:center">4/15</td>
</tr>
<tr>
<td style="text-align:center"> $B$ bumps $C$</td>
<td style="text-align:center">$A$, $C$, $B$</td>
<td style="text-align:center">odd</td>
<td style="text-align:center">8/45</td>
</tr>
<tr>
<td style="text-align:center"> $A$ bumps $B$</td>
<td style="text-align:center">$B$, $A$, $C$</td>
<td style="text-align:center">odd</td>
<td style="text-align:center">1/3</td>
</tr>
<tr>
<td style="text-align:center"> $B$ bumps $C$, then $A$ bumps $C$</td>
<td style="text-align:center">$C$, $A$, $B$</td>
<td style="text-align:center">even</td>
<td style="text-align:center">4/27</td>
</tr>
<tr>
<td style="text-align:center"> $A$ bumps $B$, then $B$ bumps $C$</td>
<td style="text-align:center">$C$, $B$, $A$</td>
<td style="text-align:center">odd</td>
<td style="text-align:center">2/27</td>
</tr>
</tbody>
</table>
<p>Therefore, $p(3,160) = 4/15 + 4/27 = 56/135$.</p>
<p>You are also given that $p(4,400)=0.5107843137$, rounded to 10 digits after the decimal point.</p>
<p>Find $p(13,1800)$ rounded to 10 digits after the decimal point.</p>
<hr>
<h2 id="赛艇"><a href="#赛艇" class="headerlink" title="赛艇"></a><strong>赛艇</strong></h2><p>在牛津大学，每年都会举办一场规则奇特的赛艇比赛：</p>
<ul>
<li>每一组比赛由$n$条船进行（通常是13条），按照以往的表现决定排名。</li>
<li>同一组中所有的船以40米的间隔沿河设定出发点，排名越高的船越靠近上游。</li>
<li>所有的船同时向上游出发，试图追上前船同时避免被后船追上。</li>
<li>每条船保持前进直到它到达终点线<i class="zh">或</i>它追上（“撞击”）前船。</li>
<li>终点线距离排名最低的船的起始位置距离$L$米（航程全长在现实中通常是1800米）。（因为起始位置不同，排名高的船到终点线的距离略短于排名低的船。）</li>
<li>当“撞击”发生时，进行“撞击”的船结束比赛。而“被撞”的船则继续前进，甚至可能被后面的船“撞击”多次。</li>
<li>在比赛后，每一组的船会根据发生的“撞击”重新进行排名。具体来说，如果原先船$A$排名低于船$B$，则船$A$的新排名高于船$B$当且仅当以下之一发生：<ol>
<li>$A$直接撞击$B$ </li>
<li>$A$撞击一艘船，该船撞击$B$ </li>
<li>$A$撞击一艘船，该船撞击另一艘船，另一艘船撞击$B$ </li>
<li>依此类推</li>
</ol>
</li>
</ul>
<p><b>注意</b>：问题方便起见，你可以暂时忽略船的长度，并且假设撞击准确地发生在两船位置相同时。（现实中，当两船有物理上的接触时就认定发生了碰撞，通常此时两船的距离远不到一个船身长。）</p>
<p>假设在一场特定的比赛，每条船$B_j$以固定的速度$v_j = - \log X_j$米每秒行驶，其中$X_j$从0到1上（均匀分布）随机独立地抽取。这些速度都是相对于河岸的：你可以忽略水流的速度。</p>
<p>令$p(n,L)$表示，当每一组有$n$条船且航程全长为$L$时，新排名是原排名的<b>偶排列</b>的概率。</p>
<p>例如，当$n=3$且$L=160$时，将三条船分别按排名标记为$A$，$B$，$C$，其中$C$的排名最高，则比赛所有可能的结果如下表所示：</p>
<table>
<thead>
<tr>
<th style="text-align:center"><b>发生的撞击</b></th>
<th style="text-align:center"><b>新排名</b></th>
<th style="text-align:center"><b>排列性质</b></th>
<th style="text-align:center"><b>概率</b></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"> 未发生</td>
<td style="text-align:center">$A$，$B$，$C$</td>
<td style="text-align:center">偶排列</td>
<td style="text-align:center">4/15</td>
</tr>
<tr>
<td style="text-align:center"> $B$撞击$C$</td>
<td style="text-align:center">$A$，$C$，$B$</td>
<td style="text-align:center">奇排列</td>
<td style="text-align:center">8/45</td>
</tr>
<tr>
<td style="text-align:center"> $A$撞击$B$</td>
<td style="text-align:center">$B$，$A$，$C$</td>
<td style="text-align:center">奇排列</td>
<td style="text-align:center">1/3</td>
</tr>
<tr>
<td style="text-align:center"> $B$撞击$C$，然后$A$撞击$C$</td>
<td style="text-align:center">$C$，$A$，$B$</td>
<td style="text-align:center">偶排列</td>
<td style="text-align:center">4/27</td>
</tr>
<tr>
<td style="text-align:center"> $A$撞击$B$，然后$B$撞击$C$</td>
<td style="text-align:center">$C$，$B$，$A$</td>
<td style="text-align:center">奇排列</td>
<td style="text-align:center">2/27</td>
</tr>
</tbody>
</table>
<p>因此，$p(3,160) = 4/15 + 4/27 = 56/135$。</p>
<p>此外还已知$p(4,400)=0.5107843137$，保留小数点后10位小数。</p>
<p>求$p(13,1800)$并保留小数点后10位小数。</p>
<hr>

      
    </div>

    <div class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-prev post-nav-item">
            
              <a href="/596/">Problem 596</a>
            
          </div>

          <div class="post-nav-next post-nav-item">
            
              <a href="/598/">Problem 598</a>
            
          </div>
        </div>
      

      
      
    </div>
  </div>



    <div class="post-spread">
      
    </div>

    
      <div class="comments" id="comments">
        
          <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          </div>
        
      </div>
    
  </div>


        </div>

        
      </div>


      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview">
        <div class="site-author motion-element">
          <img class="site-author-image" src="/images/avatar.png" alt="sx349" />
          <p class="site-author-name">Leonhard Euler(1707-1783)</p>
        </div>
        <p class="site-description motion-element"><br>Project Euler | 欧拉计划<br>中文翻译站</p>
        
        

        <div class="links-of-author motion-element">
          
        </div>

        
        
          <div class="cc-license motion-element">
            <a href="http://creativecommons.org/licenses/by-nc-sa/4.0" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            <p class="site-author-name" style="font-size:14px">友情链接</p>
            
              <span class="links-of-author-item">
              <a href="https://projecteuler.net" target="_blank">Project Euler</a>
              </span><br>
            
              <span class="links-of-author-item">
              <a href="http://pe.spiritzhang.com/" target="_blank">官方汉化</a>
              </span><br>
            
              <span class="links-of-author-item">
              <a href="http://jakwings.is-programmer.com/Project_Euler" target="_blank">饮水思源汉化</a>
              </span><br>
            
              <span class="links-of-author-item">
              <a href="http://sx349.github.io" target="_blank">译者博客</a>
              </span><br>
            
          
        </div>
        
      </div>

      
        <div class="post-toc-wrap sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator"></div>
          <div class="post-toc">
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem-597"><span class="nav-number">1.</span> <span class="nav-text">Problem 597</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Torpids"><span class="nav-number">1.1.</span> <span class="nav-text">Torpids</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#赛艇"><span class="nav-number">1.2.</span> <span class="nav-text">赛艇</span></a></li></ol></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator"></div>
        </div>
      

    </div>
  </div>


    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy;  2015 - 
  2017
  <span class="with-love"><i class="icon-heart"></i></span>
  <span class="author"><a href="http://sx349.github.io">sx349</a></span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist 
  </a>by <a href="http://notes.iissnan.com/">IIssNan</a>
</div>



      </div>
    </div>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.3"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.3"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.3" id="motion.global"></script>



  <script type="text/javascript" src="/js/search-toggle.js"></script>

  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.3" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var $sidebarInner = $('.sidebar-inner');
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.didShow', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;
          var self = this;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      $(indicator).velocity('stop').velocity({
        opacity: action === 'show' ? 0.4 : 0
      }, { duration: 100 });
    }

  });
</script>


  <script type="text/javascript" id="sidebar.nav">
    $(document).ready(function () {
      var html = $('html');

      $('.sidebar-nav li').on('click', function () {
        var item = $(this);
        var activeTabClassName = 'sidebar-nav-active';
        var activePanelClassName = 'sidebar-panel-active';
        if (item.hasClass(activeTabClassName)) {
          return;
        }

        var currentTarget = $('.' + activePanelClassName);
        var target = $('.' + item.data('target'));

        currentTarget.velocity('transition.slideUpOut', 200, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', 200)
            .addClass(activePanelClassName);
        });

        item.siblings().removeClass(activeTabClassName);
        item.addClass(activeTabClassName);
      });

      $('.post-toc a').on('click', function (e) {
        e.preventDefault();
        var offset = $(escapeSelector(this.getAttribute('href'))).offset().top;
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        });
      });

      // Expand sidebar on post detail page by default, when post has a toc.
      var $tocContent = $('.post-toc-content');
      if (isDesktop() && CONFIG.sidebar === 'post') {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          displaySidebar();
        }
      }
    });
  </script>




  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
    });
  </script>

  
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


  
  
  

  

    <script type="text/javascript">
      var disqus_shortname = 'pe-cn';
      var disqus_identifier = '597/';
      var disqus_title = 'Problem 597';
      var disqus_url = 'http://yoursite.com/597/';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
        run_disqus_script('embed.js');
      
    </script>
  




  
  

</body>
</html>
